---
title: "Webhooks"
api: "POST /webhooks"
description: "Receba notificações automáticas em tempo real sobre eventos na sua conta."
---

Webhooks são a forma mais eficiente de manter seu sistema sincronizado com a Zynx Wallet. Em vez de ficar consultando a API repetidamente, nós avisamos você assim que algo acontece.

## Como Funciona

1. Você configura uma URL de destino no seu painel ou via API.
2. Quando um evento ocorre (ex: pagamento confirmado), a Zynx faz um `POST` para sua URL.
3. Seu servidor deve responder com um status HTTP `200 OK` para confirmar o recebimento.

<Warning>
  **Importante:** Se o seu servidor não responder com `200 OK`, a Zynx tentará reenviar a notificação em intervalos crescentes por até 24 horas.
</Warning>

## Estrutura do Payload

O corpo da requisição enviada pela Zynx segue este formato:

<ResponseField name="event" type="string">
  O tipo do evento ocorrido.
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="Detalhes do Evento">
    <ResponseField name="id" type="string">
      ID da transação relacionada (ex: `pay_abc123`).
    </ResponseField>
    <ResponseField name="status" type="string">
      Novo status da transação (`COMPLETED`, `FAILED`, `CANCELLED`).
    </ResponseField>
    <ResponseField name="value" type="number">
      Valor da transação em **centavos**.
    </ResponseField>
    <ResponseField name="netValue" type="number">
      Valor líquido (após taxas) em **centavos**.
    </ResponseField>
  </Expandable>
</ResponseField>

### Exemplo de Notificação de Pagamento

```json
{
  "event": "payment.completed",
  "timestamp": "2024-02-16T15:30:00Z",
  "data": {
    "id": "pay_abc123",
    "status": "COMPLETED",
    "value": 15300,
    "netValue": 15000,
    "updatedAt": "2024-02-16T15:05:00Z"
  }
}
```

## Eventos Suportados

| Evento | Quando ocorre? |
| :--- | :--- |
| `payment.completed` | Quando o cliente finaliza o pagamento PIX com sucesso. |
| `payment.failed` | Quando o pagamento não pôde ser processado ou expirou. |
| `withdrawal.created` | Quando um novo saque é solicitado via API ou Painel. |
| `withdrawal.completed` | Quando o saque foi enviado com sucesso para o destino. |
| `withdrawal.failed` | Quando o saque foi rejeitado (ex: chave PIX inválida). |

## Segurança (Recomendado)

Para garantir que a notificação veio realmente da Zynx Wallet, você deve validar o cabeçalho `X-Zynx-Signature` enviado em cada POST.

1. Obtenha seu `Webhook Secret` no painel.
2. Gere um HMAC SHA256 do corpo bruto (raw body) da requisição usando seu Secret.
3. Compare o resultado com o valor do cabeçalho `X-Zynx-Signature`.

<Tip>
  Sempre processe webhooks de forma assíncrona. Receba o dado, responda `200 OK` imediatamente e depois processe a lógica de negócio em background.
</Tip>
